(this["webpackJsonpcity-builder"]=this["webpackJsonpcity-builder"]||[]).push([[0],[,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return i}));const a=(e,t)=>{const n=performance.now();a.lastCall&&n-a.lastCall<t&&window.clearTimeout(a.lastTimerId),a.lastCall=n,a.lastTimerId=window.setTimeout(()=>{e(),a.lastCall=0,a.lastTimerId=null},t)},l=t=>window.location.hash=(t=>e.from(JSON.stringify(t)).toString("base64"))(t),i=t=>{let n=null;try{const l=o(t||window.location.hash);a=l,n=JSON.parse(e.from(a,"base64"))}catch(l){}var a;return n},o=e=>(e&&(e.indexOf("/")&&(e=e.split("/").pop()),"#"===e[0]&&(e=e.substr(1))),e)}).call(this,n(22).Buffer)},,function(e,t,n){e.exports={tooltip:"tooltip_tooltip__1uHZI",closeBtn:"tooltip_closeBtn__1LL9e",table:"tooltip_table__ITSvF"}},function(e,t,n){e.exports={tilesView:"cityViewer_tilesView__nDwhO",tile:"cityViewer_tile__3vtyP",tileBtn:"cityViewer_tileBtn__2uFFw"}},function(e,t,n){e.exports={header:"header_header__v9FKw",options:"header_options__2uQYe"}},,function(e,t,n){e.exports=n.p+"static/media/Ground.f403a60e.png"},function(e,t,n){e.exports=n.p+"static/media/Grass.7170c6cd.png"},function(e,t,n){e.exports=n.p+"static/media/Church.7bc8d6de.png"},function(e,t,n){e.exports=n.p+"static/media/Pravda.e6952de9.png"},function(e,t,n){e.exports=n.p+"static/media/milk_cooperation_small.f31462c0.png"},function(e,t,n){e.exports=n.p+"static/media/milk_cooperation.972d65d7.png"},function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(2),o=n.n(i);n(18),n(19);const c=l.a.createContext();function r(e){let{children:t}=e;const n=Object(a.useRef)(),[i,o]=Object(a.useState)();return Object(a.useEffect)(()=>{o(n.current)},[]),l.a.createElement("div",{className:"modal-container"},l.a.createElement(c.Provider,{value:i},t),l.a.createElement("div",{ref:n}))}function s(e){let{onClose:t,children:n,...i}=e;const r=Object(a.useContext)(c);return r?o.a.createPortal(l.a.createElement("div",{className:"modal-overlay",onClick:t},l.a.createElement("div",Object.assign({className:"modal-dialog",onClick:e=>e.stopPropagation()},i),l.a.createElement("div",{className:"modal-head"},l.a.createElement("div",{className:"modal-title"},i.title||""),l.a.createElement("button",{className:"modal-btn",onClick:t},"Close")),l.a.createElement("div",{className:"modal-body"},n))),r):null}function u(e){let{setOpen:t,onLoadHash:n}=e;const i=Object(a.useRef)();return l.a.createElement(s,{title:"Load...",onClose:()=>t(!1),style:{width:"100%",maxWidth:420}},l.a.createElement("p",null,"Paste a city hash below to load a previous creation :"),l.a.createElement("input",{type:"text",ref:i}),l.a.createElement("button",{className:"btn-clear",onClick:e=>n(i.current.value)},"Load"))}var d=n(5),m=n.n(d);function f(e){let{onLoadHash:t,isEditMode:n,onEditHandler:i}=e;const[o,c]=Object(a.useState)(!1);return l.a.createElement("header",{className:m.a.header},l.a.createElement("div",null),l.a.createElement("div",{className:m.a.options},l.a.createElement("button",{onClick:i},n?"View":"Edit")),o&&l.a.createElement(u,{setOpen:c,onLoadHash:t}))}n(20);var p=n(7),h=n.n(p),v=n(8),g=n.n(v),b=n(9),E=n.n(b),w=n(10),N=n.n(w),C=n(11),_=n.n(C),y=n(12),x=n.n(y);const S=[{url:h.a},{url:g.a},{url:E.a},{url:N.a},{url:_.a},{url:x.a}];function k(e){let{selectedTile:t,onSelect:n}=e;return l.a.createElement("div",{className:"tiles-library"},l.a.createElement("div",{className:"list"},S.map((e,a)=>{let{url:i}=e;return l.a.createElement("div",{key:a,className:"tile ".concat(t===a?"selected":""),onClick:()=>n(a)},l.a.createElement("div",{className:"tile-img",style:{backgroundImage:"url(".concat(i,")")}}))})))}n(21);var O=n(1);const j=12,L=6,z=260,M=460,T=e=>{const t=e%j,n=Math.floor(e/j);return{tileX:t,tileY:n,x:t*z,y:n*M}},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const n=e%t,a=Math.floor(e/t);return{tileX:n,tileY:a}},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const{tileX:l,tileY:i}=P(e,t);return{left:"".concat(128*(l-i-1)+n,"px"),top:"".concat(73*(l+i)+a,"px")}},I=(new Array(j*L).fill(1).map((e,t)=>T(t)),function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Array(e*e).fill(0).map((e,n)=>t?Math.floor(72*Math.random()):0)}),B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I(e),n=arguments.length>2?arguments[2]:void 0;const a=Object(O.b)(n);return a&&a.gridSize&&"number"===typeof a.gridSize&&a.tiles&&a.tiles instanceof Array&&(e=a.gridSize,t=a.tiles),{gridSize:e,tiles:t}};function H(e){let{tiles:t,onLeftClick:n,onRightClick:a,gridSize:i=6,offsetX:o=130*i,offsetY:c=-300,selectedTile:r}=e;const s=e=>{const t=(e=>e.target.hasAttribute("data-tile-idx")?Number(e.target.getAttribute("data-tile-idx")):-1)(e);t>-1&&(e.preventDefault(),e.stopPropagation(),1===e.buttons?n(t):2===e.buttons&&a(t))};return l.a.createElement("div",{className:"tiles-view",onMouseMove:e=>{e.buttons&&s(e)}},t.map((e,t)=>{const{top:n,left:a}=A(t,i,o,c);return l.a.createElement("div",{key:t,className:"tile",style:{backgroundImage:"url(".concat(S[e].url,")"),top:n,left:a,"--hover-image":"url(".concat(S[r].url,")")}},l.a.createElement("div",{className:"tile-btn","data-tile-idx":t,onMouseDown:s}))}))}var R=n(3),V=n.n(R);const Y=[{title:"Personal",value:20},{title:"Total income",value:"20000UAH"}];var X=e=>{let{onClose:t}=e;return l.a.createElement("div",{className:V.a.tooltip},l.a.createElement("button",{className:V.a.closeBtn,onClick:t},"x"),l.a.createElement("h3",null,"Pravda"),l.a.createElement("div",{className:V.a.table},Y.map(e=>{let{title:t,value:n}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t),l.a.createElement("span",null,n))})))},D=n(4),F=n.n(D);function J(e){let{tiles:t,gridSize:n=6,offsetX:i=150*n,offsetY:o=-300}=e;const[c,r]=Object(a.useState)(null),s=e=>{const t=(e=>e.target.hasAttribute("data-tile-idx")?Number(e.target.getAttribute("data-tile-idx")):-1)(e);t>-1&&(e.preventDefault(),e.stopPropagation(),1===e.buttons?(e=>{r(e)})(t):e.buttons)},u=()=>{r(null)};return l.a.createElement("div",{className:F.a.tilesView},t.map((e,t)=>{const{top:a,left:r}=A(t,n,i,o);return l.a.createElement("div",{key:t,className:F.a.tile,style:{backgroundImage:"url(".concat(S[e].url,")"),top:a,left:r,"--hover-image":"url(".concat(S[e].url,")")}},c===t&&l.a.createElement(X,{onClose:u}),l.a.createElement("div",{className:F.a.tileBtn,"data-tile-idx":t,onMouseDown:s}))}))}let G="";const U=[3,0,0,2,0,2,0,5,0,0,3,0,3,0,5,3,0,3,0,4,2,0,0,0,5,4,0,0,0,5,3,0,4,0,0,4];function K(){const[e,t]=Object(a.useState)(6),[n,i]=Object(a.useState)(U),[o,c]=Object(a.useState)(0),[r,s]=Object(a.useState)(!0);Object(a.useEffect)(()=>(window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d)));const u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return Object(O.a)(()=>{G=Object(O.c)({gridSize:e,tiles:n})},t)},d=e=>{const t=new URL(e.newURL).hash.substr(1);G!==t&&(G=t,m(t,!1))},m=function(a){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{gridSize:o,tiles:c}=B(e,n,a);t(o),i(c),l&&u(0)},p=(e,t)=>{const a=[...n];a[e]=t,i(a),u()},h=e=>p(e,o),v=e=>p(e,0);return l.a.createElement("div",{className:"tiles-builder"},l.a.createElement(f,{gridSize:e,onLoadHash:m,onGridSizeChange:a=>{const l=Number(a.target.value),o=((e,t,n)=>{const a=new Map;n.forEach((t,n)=>{const l=P(n,e);a.set(l,t)});const l=I(t,!1);return a.forEach((e,n)=>{const a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return t*n+e}(n.tileX,n.tileY,t);a>-1&&a<l.length&&(l[a]=e)}),l})(e,l,n);t(l),i(o),u()},onRandomize:()=>{i(I(e)),u(0)},onClear:()=>{i(I(e,!1)),u(0)},isEditMode:r,onEditHandler:()=>{s(e=>!e)}}),r&&l.a.createElement(k,{selectedTile:o,onSelect:e=>{e!==o&&c(e)}}),r?l.a.createElement(H,{tiles:n,gridSize:e,onLeftClick:h,onRightClick:v,selectedTile:o}):l.a.createElement(J,{tiles:n,gridSize:e,onLeftClick:h,onRightClick:v}))}n(27);function Q(){return l.a.createElement("div",{className:"App"},l.a.createElement(r,null,l.a.createElement(K,null)))}const W=document.getElementById("root");o.a.render(l.a.createElement(Q,null),W)}],[[13,1,2]]]);
//# sourceMappingURL=main.6901c9f5.chunk.js.map