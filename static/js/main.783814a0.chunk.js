(this["webpackJsonpcity-builder"]=this["webpackJsonpcity-builder"]||[]).push([[0],[,function(e,t,n){e.exports={tilesView:"cityBuilder_tilesView__2VkST",tile:"cityBuilder_tile__2qakW",tileBtn:"cityBuilder_tileBtn__2V0K_","tile-btn":"cityBuilder_tile-btn__2pHr0",withHover:"cityBuilder_withHover__3Lf3_",withError:"cityBuilder_withError__I0TC6"}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return i}));const a=(e,t)=>{const n=performance.now();a.lastCall&&n-a.lastCall<t&&window.clearTimeout(a.lastTimerId),a.lastCall=n,a.lastTimerId=window.setTimeout(()=>{e(),a.lastCall=0,a.lastTimerId=null},t)},l=t=>window.location.hash=(t=>e.from(JSON.stringify(t)).toString("base64"))(t),i=t=>{let n=null;try{const l=o(t||window.location.hash);a=l,n=JSON.parse(e.from(a,"base64"))}catch(l){}var a;return n},o=e=>(e&&(e.indexOf("/")&&(e=e.split("/").pop()),"#"===e[0]&&(e=e.substr(1))),e)}).call(this,n(21).Buffer)},function(e,t,n){e.exports={tilesView:"cityViewer_tilesView__nDwhO",tile:"cityViewer_tile__3vtyP",withHover:"cityViewer_withHover__2f_Y9",tileBtn:"cityViewer_tileBtn__2uFFw"}},,function(e,t,n){e.exports={tooltip:"tooltip_tooltip__1uHZI",closeBtn:"tooltip_closeBtn__1LL9e",table:"tooltip_table__ITSvF"}},function(e,t,n){e.exports={header:"header_header__v9FKw",options:"header_options__2uQYe"}},,function(e,t,n){e.exports=n.p+"static/media/Ground.f403a60e.png"},function(e,t,n){e.exports=n.p+"static/media/Grass.7170c6cd.png"},function(e,t,n){e.exports=n.p+"static/media/Church.7bc8d6de.png"},function(e,t,n){e.exports=n.p+"static/media/Pravda.cb766296.png"},function(e,t,n){e.exports=n.p+"static/media/milk_cooperation_small.f31462c0.png"},function(e,t,n){e.exports=n.p+"static/media/milk_cooperation.972d65d7.png"},function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(4),o=n.n(i);n(19);const r=l.a.createContext();function c(e){let{children:t}=e;const n=Object(a.useRef)(),[i,o]=Object(a.useState)();return Object(a.useEffect)(()=>{o(n.current)},[]),l.a.createElement("div",{className:"modal-container"},l.a.createElement(r.Provider,{value:i},t),l.a.createElement("div",{ref:n}))}function s(e){let{onClose:t,children:n,...i}=e;const c=Object(a.useContext)(r);return c?o.a.createPortal(l.a.createElement("div",{className:"modal-overlay",onClick:t},l.a.createElement("div",Object.assign({className:"modal-dialog",onClick:e=>e.stopPropagation()},i),l.a.createElement("div",{className:"modal-head"},l.a.createElement("div",{className:"modal-title"},i.title||""),l.a.createElement("button",{className:"modal-btn",onClick:t},"Close")),l.a.createElement("div",{className:"modal-body"},n))),c):null}function u(e){let{setOpen:t,onLoadHash:n}=e;const i=Object(a.useRef)();return l.a.createElement(s,{title:"Load...",onClose:()=>t(!1),style:{width:"100%",maxWidth:420}},l.a.createElement("p",null,"Paste a city hash below to load a previous creation :"),l.a.createElement("input",{type:"text",ref:i}),l.a.createElement("button",{className:"btn-clear",onClick:e=>n(i.current.value)},"Load"))}var d=n(6),m=n.n(d);function p(e){let{onLoadHash:t,isEditMode:n,onEditHandler:i}=e;const[o,r]=Object(a.useState)(!1);return l.a.createElement("header",{className:m.a.header},l.a.createElement("div",null),l.a.createElement("div",{className:m.a.options},l.a.createElement("button",{onClick:i},n?"View":"Edit")),o&&l.a.createElement(u,{setOpen:r,onLoadHash:t}))}var f=n(8),h=n.n(f),v=n(9),g=n.n(v),b=n(10),E=n.n(b),y=n(11),_=n.n(y),w=n(12),N=n.n(w),C=n(13),x=n.n(C);const S={type:"ground"},k={type:"business"},O=[{url:h.a,type:S.type},{url:g.a,type:S.type},{url:E.a,type:k.type},{url:_.a,type:k.type},{url:N.a,type:k.type},{url:x.a,type:k.type}];n(20);function B(e){let{selectedTile:t,onSelect:n}=e;return l.a.createElement("div",{className:"tiles-library"},l.a.createElement("div",{className:"list"},O.map((e,a)=>{let{url:i}=e;return l.a.createElement("div",{key:a,className:"tile ".concat(t===a?"selected":""),onClick:()=>n(a)},l.a.createElement("div",{className:"tile-img",style:{backgroundImage:"url(".concat(i,")")}}))})))}var j=n(2);const L=12,H=6,z=260,T=460,V=e=>{const t=e%L,n=Math.floor(e/L);return{tileX:t,tileY:n,x:t*z,y:n*T}},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;const n=e%t,a=Math.floor(e/t);return{tileX:n,tileY:a}},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const{tileX:l,tileY:i}=M(e,t);return{left:"".concat(128*(l-i-1)+n,"px"),top:"".concat(73*(l+i)+a,"px")}},P=(new Array(L*H).fill(1).map((e,t)=>V(t)),function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Array(e*e).fill(0).map((e,n)=>t?Math.floor(72*Math.random()):0)}),A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P(e),n=arguments.length>2?arguments[2]:void 0;const a=Object(j.b)(n);return a&&a.gridSize&&"number"===typeof a.gridSize&&a.tiles&&a.tiles instanceof Array&&(e=a.gridSize,t=a.tiles),{gridSize:e,tiles:t}};var R=n(1),Y=n.n(R);function X(e){let{tiles:t,onLeftClick:n,onRightClick:a,gridSize:i=6,offsetX:o=130*i,offsetY:r=-300,selectedTile:c}=e;const s=e=>{const t=(e=>e.target.hasAttribute("data-tile-idx")?Number(e.target.getAttribute("data-tile-idx")):-1)(e);t>-1&&(e.preventDefault(),e.stopPropagation(),1===e.buttons?n(t):2===e.buttons&&a(t))};return l.a.createElement("div",{className:Y.a.tilesView,onMouseMove:e=>{e.buttons&&s(e)}},t.map((e,t)=>{const{top:n,left:a}=I(t,i,o,r);O[e].type,S.type;return l.a.createElement("div",{key:t,className:"".concat(Y.a.tile," ").concat(O[e].type!==k.type?Y.a.withHover:Y.a.withError),style:{backgroundImage:"url(".concat(O[e].url,")"),top:n,left:a,"--hover-image":"url(".concat(O[c].url,")")}},l.a.createElement("div",{className:"".concat(Y.a.tileBtn," tileBtn"),"data-tile-idx":t,onMouseDown:s}))}))}var D=n(5),F=n.n(D);const J=[{title:"Personal",value:20},{title:"Total income",value:"20000UAH"}];var G=e=>{let{onClose:t}=e;return l.a.createElement("div",{className:F.a.tooltip},l.a.createElement("button",{className:F.a.closeBtn,onClick:t},"x"),l.a.createElement("h3",null,"Pravda"),l.a.createElement("div",{className:F.a.table},J.map(e=>{let{title:t,value:n}=e;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t),l.a.createElement("span",null,n))})))},U=n(3),K=n.n(U);function W(e){let{tiles:t,gridSize:n=6,offsetX:i=150*n,offsetY:o=-300}=e;const[r,c]=Object(a.useState)(null),s=e=>{const t=(e=>e.target.hasAttribute("data-tile-idx")?Number(e.target.getAttribute("data-tile-idx")):-1)(e);t>-1&&(e.preventDefault(),e.stopPropagation(),1===e.buttons?(e=>{c(e)})(t):e.buttons)},u=()=>{c(null)};return l.a.createElement("div",{className:K.a.tilesView},t.map((e,t)=>{const{top:a,left:c}=I(t,n,i,o),{url:d,type:m}=O[e];return l.a.createElement("div",{key:t,className:"".concat(K.a.tile," ").concat(m===k.type?K.a.withHover:""),style:{backgroundImage:"url(".concat(d,")"),top:a,left:c,"--hover-image":"url(".concat(d,")")}},r===t&&l.a.createElement(G,{onClose:u}),l.a.createElement("div",{className:K.a.tileBtn,"data-tile-idx":t,onMouseDown:m===k.type?s:void 0}))}))}n(26);let q="";const Q=[3,0,0,2,0,2,0,5,0,0,3,0,3,0,5,3,0,3,0,4,2,0,0,0,5,4,0,0,0,5,3,0,4,0,0,4];function Z(){const[e,t]=Object(a.useState)(6),[n,i]=Object(a.useState)(Q),[o,r]=Object(a.useState)(0),[c,s]=Object(a.useState)(!0);Object(a.useEffect)(()=>(window.addEventListener("hashchange",d),()=>window.removeEventListener("hashchange",d)));const u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return Object(j.a)(()=>{q=Object(j.c)({gridSize:e,tiles:n})},t)},d=e=>{const t=new URL(e.newURL).hash.substr(1);q!==t&&(q=t,m(t,!1))},m=function(a){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{gridSize:o,tiles:r}=A(e,n,a);t(o),i(r),l&&u(0)},f=(e,t)=>{const a=[...n];a[e]=t,i(a),u()},h=e=>f(e,o),v=e=>f(e,0);return l.a.createElement("div",{className:"tiles-builder"},l.a.createElement(p,{gridSize:e,onLoadHash:m,onGridSizeChange:a=>{const l=Number(a.target.value),o=((e,t,n)=>{const a=new Map;n.forEach((t,n)=>{const l=M(n,e);a.set(l,t)});const l=P(t,!1);return a.forEach((e,n)=>{const a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return t*n+e}(n.tileX,n.tileY,t);a>-1&&a<l.length&&(l[a]=e)}),l})(e,l,n);t(l),i(o),u()},onRandomize:()=>{i(P(e)),u(0)},onClear:()=>{i(P(e,!1)),u(0)},isEditMode:c,onEditHandler:()=>{s(e=>!e)}}),c&&l.a.createElement(B,{selectedTile:o,onSelect:e=>{e!==o&&r(e)}}),c?l.a.createElement(X,{tiles:n,gridSize:e,onLeftClick:h,onRightClick:v,selectedTile:o}):l.a.createElement(W,{tiles:n,gridSize:e,onLeftClick:h,onRightClick:v}))}n(27);function $(){return l.a.createElement("div",{className:"App"},l.a.createElement(c,null,l.a.createElement(Z,null)))}const ee=document.getElementById("root");o.a.render(l.a.createElement($,null),ee)}],[[14,1,2]]]);
//# sourceMappingURL=main.783814a0.chunk.js.map